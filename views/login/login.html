<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Kubernetes Cloud Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description"/>
    <meta content="Coderthemes" name="author"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

    <!-- App favicon -->
    <link rel="shortcut icon" href="/static/images/favicon.ico">

    <!-- App css -->
    <link href="/static/plugins/bootstrap-select/css/bootstrap-select.min.css" rel="stylesheet"/>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="/static/css/core.css" rel="stylesheet" type="text/css"/>
    <link href="/static/css/components.css" rel="stylesheet" type="text/css"/>
    <link href="/static/css/icons.css" rel="stylesheet" type="text/css"/>
    <link href="/static/css/pages.css" rel="stylesheet" type="text/css"/>
    <link href="/static/css/menu.css" rel="stylesheet" type="text/css"/>
    <link href="/static/css/responsive.css" rel="stylesheet" type="text/css"/>

    <script src="/static/js/modernizr.min.js"></script>

</head>


<body class="bg-accpunt-pages">

<!-- HOME -->
<section>
    <div class="container">
        <div class="row">
            <div class="col-sm-12">

                <div class="wrapper-page">

                    <div class="account-pages">
                        <div class="account-box">
                            <div class="account-logo-box">
                                <h1 class="text-center"><img class="logo" src="/static/images/logo.png"></h1>
                                <!-- <h5 class="text-uppercase font-bold m-b-5 m-t-50">登陆</h5> -->
                            </div>
                            <div class="account-content">
                                <form class="form-horizontal">

                                    <div class="form-group m-b-20">
                                        <div class="col-xs-12">
                                            <label for="emailaddress">用户名</label>
                                            <input name="username" class="form-control" type="text" id="emailaddress"
                                                   required="" placeholder="admin">
                                        </div>
                                    </div>
                                    <div class="form-group m-b-20">
                                        <div class="col-xs-12">
                                            <label for="password">密码</label>
                                            <input name="password" class="form-control" type="password" required=""
                                                   id="password" placeholder="Enter your password">
                                        </div>
                                    </div>
                                    <div class="form-group m-b-20">
                                        <div class="loginbox-forgot"></div>
                                    </div>

                                    <div class="form-group text-center m-t-10">
                                        <div class="col-xs-12">
                                            <button onclick="login();"
                                                    class="btn btn-md btn-block btn-primary waves-effect waves-light"
                                                    type="button">Sign In
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!-- end card-box-->


                </div>
                <!-- end wrapper -->

            </div>
        </div>
    </div>
</section>
<!-- END HOME -->

<script>
    /**
     * Created by zhaoyun on 2017/12/31.
     */
    /**
     *
     * @param paramter
     * @param url
     * @return {string}
     */
    function post(paramter, url) {
        var result = "";
        $.ajax({
            type: "POST",
            url: url,
            data: paramter,
            async: false,
            success: function (data) {
                result = data;
            }
        });
        return result;
    }
    //将页面写入到右面的框架里
    function login() {
        setTimeout(function () {
            var url = "/api/user/login";
            var data = {
                username: $("input[name='username']").val(),
                password: $("#password").val()
            }
            var result = post(data, url);
            var results = result.split(",")
            if (results[0] == "true") {
                window.location.href = results[1];
            } else {
                $(".loginbox-forgot").html("<span class='text-danger'>"+results[1]+"</span>");
            }
        }, 1000)
    }


    document.onkeydown = function (event) {
        var e = event || window.event || arguments.callee.caller.arguments[0];
        if (e && e.keyCode == 27) { // 按 Esc
            //要做的事情
        }
        if (e && e.keyCode == 113) { // 按 F2
            //要做的事情
        }
        if (e && e.keyCode == 13) { // enter 键
            login();
        }
    };
</script>

<!-- jQuery  -->
<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<script src="/static/js/metisMenu.min.js"></script>
<script src="/static/js/waves.js"></script>
<script src="/static/js/jquery.slimscroll.js"></script>
<script src="/static/plugins/bootstrap-select/js/bootstrap-select.min.js" type="text/javascript"></script>

<!-- App js -->
<script src="/static/js/jquery.core.js"></script>
<script src="/static/js/jquery.app.js"></script>

</body>
</html>